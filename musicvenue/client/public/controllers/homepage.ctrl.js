//---------Homepage logic--------------
$(document).ready( function() {

//------Code runs when the document is ready:--------

//Masonry plug-in ininitialization
var container = document.querySelector('#masonry');

var masonry = new Masonry(container, {
	columnWidth: 30,
itemSelector: '.post' //HTML element to be used containing the .post class.
});

//Layout the posts generated by AngularJS
masonry.layout();

});

//Audio.js plug-in initialization
audiojs.events.ready(function() {
	var as = audiojs.createAll();
});


//AngularJS controller
angular.module('app').controller("HomepageController", function(){
	//Obtaining the scope obj. of the controller
	var vmodel = this;

	//------Event handlers-------

	//User asking for file upload
	vmodel.openUpload = function(upType){
		//Show or hide the upload form
		vmodel.showUpload = !vmodel.showUpload;

		if(vmodel.showUpload){
			//Update upload header value:
			switch(upType){
				case 0:
					vmodel.uploadTitle = "image";
				break;

				case 1:
					vmodel.uploadTitle = "audio";
				break;

				case 2:
					vmodel.uploadTitle = "video";
				break;
			}
		}

	};

	//-----------Dummy operations: for design purposes-----------------
	// vmodel.showUpload = true;
	//vmodel.post_type = 1;

	vmodel.posts = [{
    	"post_id": "2",
        "post_user": "Pepe Olivera",
        "post_data": {"post_user": "Ramon Martinez", 
        			"description": "Esto es un post para que se vea como tilizo los instrumentos que tengo!", 
        			"media": ["","",""], 
        			"likes": {}},
        "data_time": {}, 
        "post_type": 1,
  	},
  	{
    	"post_id": "2",
        "post_user": "Pepe Olivera",
        "post_data": {"post_user": "Ramon Martinez", 
        			"description": "Esto es un post para que se vea como tilizo los instrumentos que tengo!", 
        			"media": ["","",""], 
        			"likes": {}},
        "data_time": {}, 
        "post_type": 3,
  	},
  	{
    	"post_id": "2",
        "post_user": "Pepe Olivera",
        "post_data": {"post_user": "Ramon Martinez", 
        			"description": "Esto es un post para que se vea como tilizo los instrumentos que tengo!", 
        			"media": ["","",""], 
        			"likes": {}},
        "data_time": {}, 
        "post_type": 0,
  	},
  	{
    	"post_id": "2",
        "post_user": "Pepe Olivera",
        "post_data": {"post_user": "Ramon Martinez", 
        			"description": "Esto es un post para que se vea como tilizo los instrumentos que tengo!", 
        			"media": ["","",""], 
        			"likes": {}},
        "data_time": {}, 
        "post_type": 1,
  	},
  	{
    	"post_id": "2",
        "post_user": "Pepe Olivera",
        "post_data": {"post_user": "Ramon Martinez", 
        			"description": "Esto es un post para que se vea como tilizo los instrumentos que tengo!", 
        			"media": ["","",""], 
        			"likes": {}},
        "data_time": {}, 
        "post_type": 3,
  	},
  	{
    	"post_id": "2",
        "post_user": "Pepe Olivera",
        "post_data": {"post_user": "Ramon Martinez", 
        			"description": "Esto es un post para que se vea como tilizo los instrumentos que tengo!", 
        			"media": ["","",""], 
        			"likes": {}},
        "data_time": {}, 
        "post_type": 2,
  	}];

});